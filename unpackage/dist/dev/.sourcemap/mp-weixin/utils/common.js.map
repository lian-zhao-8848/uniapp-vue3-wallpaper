{"version":3,"file":"common.js","sources":["utils/common.js"],"sourcesContent":["export function formatRelativeTime(timestamp) {\r\n\t// 统一转换成毫秒时间戳\r\n\tconst targetTime = new Date(timestamp).getTime();\r\n\tconst currentTime = Date.now();\r\n\tconst diff = currentTime - targetTime;\r\n\r\n\t// 如果传入的是未来时间，按照需求可以根据实际情况处理，这里直接返回 null 或 \"1分钟内\"\r\n\tif (diff < 0) {\r\n\t\treturn null;\r\n\t}\r\n\r\n\t// 定义时间常数（毫秒）\r\n\tconst ONE_MINUTE = 60 * 1000;\r\n\tconst ONE_HOUR = 60 * ONE_MINUTE;\r\n\tconst ONE_DAY = 24 * ONE_HOUR;\r\n\tconst ONE_MONTH = 30 * ONE_DAY; // 按 30天/月 估算，最适合常规的相对时间展示\r\n\r\n\t// 1分钟内\r\n\tif (diff <= ONE_MINUTE) {\r\n\t\treturn \"1分钟内\";\r\n\t}\r\n\t// 1小时内：显示多少分钟前\r\n\telse if (diff <= ONE_HOUR) {\r\n\t\tconst minutes = Math.floor(diff / ONE_MINUTE);\r\n\t\treturn `${minutes}分钟前`;\r\n\t}\r\n\t// 1天内：显示多少小时前\r\n\telse if (diff <= ONE_DAY) {\r\n\t\tconst hours = Math.floor(diff / ONE_HOUR);\r\n\t\treturn `${hours}小时前`;\r\n\t}\r\n\t// 1个月内：显示多少天前\r\n\telse if (diff <= ONE_MONTH) {\r\n\t\tconst days = Math.floor(diff / ONE_DAY);\r\n\t\treturn `${days}天前`;\r\n\t}\r\n\t// 3个月内：显示多少个月前\r\n\telse if (diff <= 3 * ONE_MONTH) {\r\n\t\tconst months = Math.floor(diff / ONE_MONTH);\r\n\t\treturn `${months}个月前`;\r\n\t}\r\n\t// 超过三个月\r\n\telse {\r\n\t\treturn '从前从前';\r\n\t}\r\n}\r\n\r\nexport const gotoHome = () => {\r\n\tuni.showModal({\r\n\t\ttitle: '提示',\r\n\t\tcontent: \"页面有误直接返回首页\",\r\n\t\tshowCancel: false,\r\n\t\tsuccess: (res) => {\r\n\t\t\tif (res.confirm) {\r\n\t\t\t\tuni.reLaunch({\r\n\t\t\t\t\turl: '/pages/index/index'\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t}\r\n\t})\r\n}"],"names":[],"mappings":";;AAAO,SAAS,mBAAmB,WAAW;AAE7C,QAAM,aAAa,IAAI,KAAK,SAAS,EAAE,QAAO;AAC9C,QAAM,cAAc,KAAK;AACzB,QAAM,OAAO,cAAc;AAG3B,MAAI,OAAO,GAAG;AACb,WAAO;AAAA,EACP;AAGD,QAAM,aAAa,KAAK;AACxB,QAAM,WAAW,KAAK;AACtB,QAAM,UAAU,KAAK;AACrB,QAAM,YAAY,KAAK;AAGvB,MAAI,QAAQ,YAAY;AACvB,WAAO;AAAA,EACP,WAEQ,QAAQ,UAAU;AAC1B,UAAM,UAAU,KAAK,MAAM,OAAO,UAAU;AAC5C,WAAO,GAAG,OAAO;AAAA,EACjB,WAEQ,QAAQ,SAAS;AACzB,UAAM,QAAQ,KAAK,MAAM,OAAO,QAAQ;AACxC,WAAO,GAAG,KAAK;AAAA,EACf,WAEQ,QAAQ,WAAW;AAC3B,UAAM,OAAO,KAAK,MAAM,OAAO,OAAO;AACtC,WAAO,GAAG,IAAI;AAAA,EACd,WAEQ,QAAQ,IAAI,WAAW;AAC/B,UAAM,SAAS,KAAK,MAAM,OAAO,SAAS;AAC1C,WAAO,GAAG,MAAM;AAAA,EAChB,OAEI;AACJ,WAAO;AAAA,EACP;AACF;;"}