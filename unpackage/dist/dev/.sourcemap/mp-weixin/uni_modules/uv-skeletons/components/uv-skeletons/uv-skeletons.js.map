{"version":3,"file":"uv-skeletons.js","sources":["uni_modules/uv-skeletons/components/uv-skeletons/uv-skeletons.vue","D:/text/HBuilderX.4.87.2025121004/HBuilderX/plugins/uniapp-cli-vite/uniComponent:/QzovVXNlcnMvbWx6L0Rlc2t0b3Avd2FsbHBhcGVyLWt0L3VuaV9tb2R1bGVzL3V2LXNrZWxldG9ucy9jb21wb25lbnRzL3V2LXNrZWxldG9ucy91di1za2VsZXRvbnMudnVl"],"sourcesContent":["<template>\r\n\t<view class=\"uv-skeleton\">\r\n\t\t<view v-if=\"loading\">\r\n\t\t\t<view v-for=\"(item, index) in elements\" :key=\"index\">\r\n\t\t\t\t<!-- 横向并列布局 -->\r\n\t\t\t\t<view class=\"uv-skeleton__group\" :style=\"[style(item)]\" v-if=\"item.type=='flex'\">\r\n\t\t\t\t\t<view v-for=\"(item2,index2) in item.children\" :class=\"[item2.clas]\" :style=\"[style(item2)]\" :key=\"index2\">\r\n\t\t\t\t\t\t<view v-for=\"(item3,index3) in item2.elements\" :key=\"index3\">\r\n\t\t\t\t\t\t\t<!-- 垂直高度站位 -->\r\n\t\t\t\t\t\t\t<view :style=\"{height: $uv.addUnit(item3.height,'rpx')}\" v-if=\"item3.type=='gap'\"></view>\r\n\t\t\t\t\t\t\t<view :class=\"[item3.clas, roundClass, animateClass]\" :style=\"[style(item3)]\" v-else ref=\"skeleton\"></view>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t\t<!-- 自定义骨架屏内容 -->\r\n\t\t\t\t<!-- ps 自定义扩展说明： -->\r\n\t\t\t\t<!-- 如果你需要自定义模板，可以参照这个custom的写法，增加一个skeleton配置类型，编写布局和样式就可以了 -->\r\n\t\t\t\t<!-- 注意事项：为了保证骨架效果和动态效果的一致，扩展时，在你希望实际展示在页面中的元素上加上 :class=\"[style, animateClass]\" 和 :style=\"[style(item)]\" 和 ref=\"skeleton\" -->\r\n\t\t\t\t<view :class=\"[item.clas, animateClass]\" :style=\"[style(item)]\" ref=\"skeleton\" v-else-if=\"item.type == 'custom'\"></view>\r\n\t\t\t\t<!-- 垂直高度站位 -->\r\n\t\t\t\t<view :style=\"{height: $uv.addUnit(item.height,'rpx')}\" v-else-if=\"item.type=='gap'\"></view>\r\n\t\t\t\t<!-- 其他基本单位 line avatar 等 -->\r\n\t\t\t\t<view :class=\"[item.clas, roundClass, animateClass]\" :style=\"[style(item)]\" v-else ref=\"skeleton\"></view>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\t\t<view v-else>\r\n\t\t\t<slot />\r\n\t\t</view>\r\n\t</view>\r\n</template>\r\n<script>\r\n\timport mpMixin from '@/uni_modules/uv-ui-tools/libs/mixin/mpMixin.js'\r\n\timport mixin from '@/uni_modules/uv-ui-tools/libs/mixin/mixin.js'\r\n\t// #ifdef APP-NVUE\r\n\tconst animation = weex.requireModule('animation');\r\n\t// #endif\r\n\texport default {\r\n\t\tname: 'uv-skeletons',\r\n\t\tmixins: [mpMixin, mixin],\r\n\t\tprops: {\r\n\t\t\t// 是否显示骨架\r\n\t\t\tloading: {\r\n\t\t\t\ttype: Boolean,\r\n\t\t\t\tdefault: true\r\n\t\t\t},\r\n\t\t\t// 骨架内容 具体说明参考文档：\r\n\t\t\tskeleton: {\r\n\t\t\t\ttype: Array,\r\n\t\t\t\tdefault: () => []\r\n\t\t\t},\r\n\t\t\t// 是否开启动画效果\r\n\t\t\tanimate: {\r\n\t\t\t\ttype: Boolean,\r\n\t\t\t\tdefault: true\r\n\t\t\t},\r\n\t\t\t// 是否圆角骨架风格\r\n\t\t\tround: {\r\n\t\t\t\ttype: Boolean,\r\n\t\t\t\tdefault: false\r\n\t\t\t},\r\n\t\t\t...uni.$uv?.props?.skeleton\r\n\t\t},\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\telements: [],\r\n\t\t\t\topacity: 0.5,\r\n\t\t\t\tduration: 600\r\n\t\t\t}\r\n\t\t},\r\n\t\tcomputed: {\r\n\t\t\tanimateClass() {\r\n\t\t\t\treturn this.animate ? 'uv-skeleton--animation' : 'uv-skeleton--static';\r\n\t\t\t},\r\n\t\t\troundClass() {\r\n\t\t\t\treturn this.round ? 'uv-skeleton--round' : 'uv-skeleton--radius';\r\n\t\t\t},\r\n\t\t\tstyle(item) {\r\n\t\t\t\treturn item => {\r\n\t\t\t\t\tconst style = {};\r\n\t\t\t\t\treturn this.$uv.deepMerge(style, this.$uv.addStyle(item.style));\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\tcreated() {\r\n\t\t\tthis.init();\r\n\t\t\t// #ifdef APP-NVUE\r\n\t\t\tif (this.loading && this.animate) {\r\n\t\t\t\tthis.$uv.sleep(50).then(res => {\r\n\t\t\t\t\tthis.createAnimation(this.opacity);\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t\t// #endif\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\t/**\r\n\t\t\t * 初始化数据\r\n\t\t\t */\r\n\t\t\tinit() {\r\n\t\t\t\tlet elements = [];\r\n\t\t\t\tif (!this.$uv.test.array(this.skeleton)) return this.$uv.error('skeleton参数必须为数组形式，参考文档示例：');\r\n\t\t\t\tthis.skeleton.forEach(el => {\r\n\t\t\t\t\tconst elClass = this.getElCounts(el);\r\n\t\t\t\t\telements = elements.concat(elClass);\r\n\t\t\t\t})\r\n\t\t\t\tthis.elements = [...elements];\r\n\t\t\t},\r\n\t\t\t/**\r\n\t\t\t * 处理骨架屏参数内容\r\n\t\t\t * @param {Object} el 每项数据\r\n\t\t\t */\r\n\t\t\tgetElCounts(el) {\r\n\t\t\t\tlet elements = [];\r\n\t\t\t\tlet children = [];\r\n\t\t\t\tif (this.$uv.test.number(el)) {\r\n\t\t\t\t\telements.push({\r\n\t\t\t\t\t\ttype: 'gap',\r\n\t\t\t\t\t\theight: el\r\n\t\t\t\t\t});\r\n\t\t\t\t\treturn elements;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tconst type = el.type ? el.type : 'line';\r\n\t\t\t\t\tconst num = el.num ? el.num : 1;\r\n\t\t\t\t\tconst style = el.style ? el.style : {};\r\n\t\t\t\t\tconst styleIsArray = this.$uv.test.array(style);\r\n\t\t\t\t\tconst gap = el.gap ? el.gap : '20rpx';\r\n\t\t\t\t\tconst child = el.children ? el.children : [];\r\n\t\t\t\t\tfor (let i = 0; i < child.length; i++) {\r\n\t\t\t\t\t\tchildren[i] = {\r\n\t\t\t\t\t\t\tclas: child[i].type.indexOf('avatar') > -1 || child[i].type.indexOf('custom') > -1 ? '' : 'uv-skeleton__group__sub',\r\n\t\t\t\t\t\t\telements: this.getElCounts(child[i])\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t}\r\n\t\t\t\t\tfor (let i = 0; i < num; i++) {\r\n\t\t\t\t\t\tif (gap && i < num && i > 0) {\r\n\t\t\t\t\t\t\telements.push({\r\n\t\t\t\t\t\t\t\ttype: 'gap',\r\n\t\t\t\t\t\t\t\theight: gap\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telements.push({\r\n\t\t\t\t\t\t\tclas: `uv-skeleton__${type}`,\r\n\t\t\t\t\t\t\ttype,\r\n\t\t\t\t\t\t\tstyle: styleIsArray ? style[i] : style,\r\n\t\t\t\t\t\t\tgap,\r\n\t\t\t\t\t\t\tchildren\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn elements;\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t/**\r\n\t\t\t * 创建动画\r\n\t\t\t */\r\n\t\t\tcreateAnimation(opacity = 1) {\r\n\t\t\t\t// loading结束之后或未开启动画不执行\r\n\t\t\t\tif (!this.loading || !this.animate) return;\r\n\t\t\t\tlet count = 0;\r\n\t\t\t\tconst skeletons = this.$refs.skeleton;\r\n\t\t\t\tskeletons.forEach(item => {\r\n\t\t\t\t\tanimation.transition(item, {\r\n\t\t\t\t\t\tstyles: {\r\n\t\t\t\t\t\t\topacity: opacity,\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tduration: this.duration\r\n\t\t\t\t\t}, () => {\r\n\t\t\t\t\t\tcount++;\r\n\t\t\t\t\t\tif (count >= skeletons.length) {\r\n\t\t\t\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\t\t\t\tthis.createAnimation(opacity < 1 ? 1 : this.opacity);\r\n\t\t\t\t\t\t\t}, 200)\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n</script>\r\n<style scoped lang=\"scss\">\r\n\t@import '@/uni_modules/uv-ui-tools/libs/css/components.scss';\r\n\t@mixin background {\r\n\t\t/* #ifdef APP-NVUE */\r\n\t\tbackground-color: #e6e6e6;\r\n\t\t/* #endif */\r\n\t\t/* #ifndef APP-NVUE */\r\n\t\tbackground: linear-gradient(90deg, #F1F2F4 25%, #e6e6e6 37%, #F1F2F4 50%);\r\n\t\tbackground-size: 400% 100%;\r\n\t\t/* #endif */\r\n\t}\r\n\t.uv-skeleton__line {\r\n\t\theight: 32rpx;\r\n\t\t// margin-bottom: 30rpx;\r\n\t}\r\n\t.uv-skeleton__line--sm {\r\n\t\theight: 24rpx;\r\n\t\tmargin-bottom: 30rpx;\r\n\t}\r\n\t.uv-skeleton__line--lg {\r\n\t\theight: 48rpx;\r\n\t\tmargin-bottom: 30rpx;\r\n\t}\r\n\t.uv-skeleton--static {\r\n\t\t@include background;\r\n\t}\r\n\t.uv-skeleton--radius {\r\n\t\tborder-radius: 8rpx;\r\n\t}\r\n\t.uv-skeleton--round {\r\n\t\tborder-radius: 30rpx;\r\n\t}\r\n\t.uv-skeleton__avatar {\r\n\t\twidth: 100rpx;\r\n\t\theight: 100rpx;\r\n\t\tborder-radius: 50rpx;\r\n\t}\r\n\t.uv-skeleton__avatar--sm {\r\n\t\twidth: 50rpx;\r\n\t\theight: 50rpx;\r\n\t\tborder-radius: 25rpx;\r\n\t}\r\n\t.uv-skeleton__avatar--lg {\r\n\t\twidth: 200rpx;\r\n\t\theight: 200rpx;\r\n\t\tborder-radius: 100rpx;\r\n\t}\r\n\t.uv-skeleton__group {\r\n\t\t@include flex;\r\n\t\t&__sub {\r\n\t\t\tflex: 1;\r\n\t\t}\r\n\t}\r\n\t.uv-skeleton--animation {\r\n\t\t@include background;\r\n\t\t/* #ifndef APP-NVUE */\r\n\t\tanimation: skeleton 1.8s ease infinite\r\n\t\t\t/* #endif */\r\n\t}\r\n\t/* #ifndef APP-NVUE */\r\n\t@keyframes skeleton {\r\n\t\t0% {\r\n\t\t\tbackground-position: 100% 50%\r\n\t\t}\r\n\t\t100% {\r\n\t\t\tbackground-position: 0 50%\r\n\t\t}\r\n\t}\r\n\t/* #endif */\r\n</style>","import Component from 'C:/Users/mlz/Desktop/wallpaper-kt/uni_modules/uv-skeletons/components/uv-skeletons/uv-skeletons.vue'\nwx.createComponent(Component)"],"names":["mpMixin","mixin","uni","item"],"mappings":"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"}